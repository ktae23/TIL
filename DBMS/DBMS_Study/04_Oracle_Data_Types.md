## Oracle의 데이터 형식

- Oracle에서 지원하는 데이터 형식의 종류는 30개 가까이 되며 거의 쓰이지 않는 것도 있기에 모두 외우는것도 무리이다.

<br/>

### 숫자 데이터 형식

> 숫자형 데이터 형식은 정수, 실수 등의 숫자를 표현하는데 주로 NUMBER 데이터 형식을 사용한다.

| 데이터 형식      | 바이트 수 | 숫자범위                 | 설명                                                  |
| ---------------- | --------- | ------------------------ | ----------------------------------------------------- |
| BINARY_FLOAT     | 4         |                          | 32bit 부동 소수점                                     |
| BINAYRY_DOUBLE   | 8         |                          | 64bit 부동 소수점                                     |
| ⭐ NUMBERS(p.[s]) | 5~21      | p : 1~38<br />s : 84~127 | 전체 자릿수(p)와 소수점 이하 자릿수(s)를 가진 숫자형. |

- NUMBER 데이터 형식은 양수의 범위를 1 X 10^-130부터 9.99...9 X 10^125까지 표현하고, 유효 숫자는 38자리까지 표현
  - 음수는 동일한 범위에서 마이너스만 붙음
  - 거의 무한대에 가까운 큰 수를 저장 가능

<br/>

### 문자 데이터 형식

| 데이터 형식     | 바이트 수  | 설명                                                         |
| --------------- | ---------- | ------------------------------------------------------------ |
| ⭐CHAR[(n)]      | 1~2,000    | 고정길이 문자형<br />n을 1부터 2,000까지 지정 가능<br />character의 약자<br />숫자 없이 CHAR만 사용하면 CHAR(1)과 동일 |
| ⭐NCHAR[(n)]     | 2~2,000    | 유니코드 고정길이 문자형,<br />n을 1부터 1,000까지 지정 가능<br />한글을 지정할 수 있으므로 한 글자당 2Byte가 사용<br />National character의 약자<br />숫자 없이 NCHAR만 사용하면 NCHAR(1)과 동일 |
| ⭐VARCHAR2[(n)]  | 1~4,000    | 가변길이 문자형<br />n은 1부터 4,000까지 지정 가능<br />Variable character의 약자 |
| ⭐NVARCHAR2[(n)] | 2~4,000    | 유니코드 가변길이 문자형<br />n은 1부터 2,000까지 지정 가능<br />한글을 저장할 수 있으므로 한 글자당 2Byte가 사용<br />National Variable character의 약자 |
| ⭐CLOB           | 최대 128TB | 대용량 텍스트 데이터 타입(영문)<br />Character Long Object의 약자 |
| ⭐NCLOB          | 최대 128TB | 대용량 텍스트의 유니코드 데이터 타입(한글, 일본어, 한자 등)<br />National CLOB의 약자 |

<br/>

- CHAR, NACHAR 형식은 고정길이 문자형으로 자릿수가 고정
  - CHAR(100)에 'ABC' 세 글자만 저장해도, 100자리를 모두 확보한 다음에 앞에 3자리만 사용하고 뒤 97자리는 낭비
- VARCHAR2, NVARCHAR2 형식은 가변길이 문자형으로 자릿수가 변함
  - VARCHAR(100)에 'ABA' 세 글자만 저장하면 3자리만 사용
- 일반적으로 CHAR 형식이 INSERT/UPDATE 시에 더 좋은 성능을 발휘

<br/>

- 한글(유니코드)를 저장하기 위해서는 NCHAR나 NBARCHAR2 형식을 이용
  - NCHAR(3)으로 지정하면 한글, 중국어, 일본어, 프랑스어, 영어 등 모든 언어를 무조건 3글자 저장 가능
  - 더 단순하고 명확하게 문자데이터를 입력 가능
- 영어만 지정할 것이 확실하다면 CHAR나 VARCHAR2가 공간을 더 적게 사용해 성능 향상에 도움

<br/>

- 2,000글자(한글 1,000자)가 넘는 데이터를 저장하려면 CLOB이나 NCLOB을 사용
  - 최대 128TB가 저장되기 때문에 거의 무한대로 저장 된다

<br/>

### 이진 데이터 형식

| 데이터 형식 | 바이트 수                                  | 설명                                                         |
| ----------- | ------------------------------------------ | ------------------------------------------------------------ |
| ⭐BLOB       | 최대 128TB                                 | 대용량 이진(Binary) 데이터를 저장할 수 있는 데이터 타입<br />Binary LOB의 약자 |
| BFILE       | 운영체계에서 허용하는 크기<br />(대개 4GB) | 대용량 이진(Binary) 데이터를 파일 형태로 저장<br />Oracle 내부에 저장하지 않고 운영체제에 외부 파일 형태로 저장 됨<br />Binary FILE의 약자 |

<br/>

- BLOB이나 BFILE은 주로 이미지, 동영상, 음악, 지도 데이터 등을 저장하기 위한 데이터 형식
- BLOB은 파일을 Oracle 내부에 저장
- BFILE은 운영체제에 파일 형태로 저장하고 파일의 위치만 Oracle 내부에 저장
  - 읽기 전용으로만 가능하며, 파일의 무결성/보안 등에 관한 사항은 모두 운영체제가 관리

<br/>

> CLOB, NCLOB, BLOB, BFILE을 모두 합쳐서 LOB 데이터 형식이라 부름
>
> 이외에도 하위 버전의 Oracle과의 호환성을 위해서 LONG, RAW, LONG RAQ 데이터 형식이 있지만 가능한 사용하지 않는 것을 권장
>
> LONG 대신에 CLOB이나 NCLOB을, RAQ/LONG RAW 대신에 BLOB이나 BFILE을 사용

<br/>

### CLOB, BLOB

Oracle은 LOB(Large Object : 대량의 데이터)을 저장하기 위해서 CLOB, BLOB의 데이터 형식 지원

지원되는 데이터 크기는 최대 128TB 크기의 파일을 하나의 데이터로 지정 된 칼럼에 저장 가능

<br/>

### 날짜와 시간 데이터 형식

<br/>

| 데이터 형식                    | 바이트 수 | 설명                                                         |
| ------------------------------ | --------- | ------------------------------------------------------------ |
| ⭐DATE                          | 7         | 날짜는 기원전 4712년 1월 1일부터 9999년 12월 31일까지 저장된다.<br />저장되는 값은 연, 월,  시, 분, 초가 저장 된다 |
| TIMESTAMP                      | 11        | DATE와 같으나 밀리초 단위까지 저장 됨                        |
| TIMESTAMP WITH TIME ZONE       | 13        | 날짜 및 시간대 형태의 데이터 형식                            |
| TIMESTAMP WITH LOCAL TIME ZONE | 11        | 날짜 및 시간대 형태의 데이터 형식<br />단, 조회 시에는 클라이언트의 시간대로 보여짐 |

- 날짜 형식은 주로 DATE 형식을 사용

<br/>

```sql
SELECT SYSDATE FROM DUAL;		-- 현재 날짜
SELECT TO_CHAR(SYSDATE, 'YYYY/MM/DD HH:MM:SS') "현재 날짜" FROM DUAL;
SELECT TO_DATE('20201231235959', 'YYYYMMDDHH24MISS') "날짜 형식" FROM DUAL;
```

<br/>

![image-20210217210653473](C:\Users\zz238\AppData\Roaming\Typora\typora-user-images\image-20210217210653473.png)

<br/>

### 기타 데이터 형식

| 데이터 형식 | 바이트 수 | 설명                                                         |
| ----------- | --------- | ------------------------------------------------------------ |
| ROWID       | 10        | 행의 물리적인 주소를 저장하기 위한 데이터 형식<br />모든 행에 자동으로 ROWID열이 생성 됨<br />ROW IDentity의 약자 |
| XMLType     | N/A       | XML 데이터를 저장하기 위한 데이터 형식                       |
| URLType     | N/A       | URL 형식의 데이터를 저장하기 위한 데이터 형식                |

<br/>

```sql
SELECT ROWID, MEMBERID FROM MEMBERTBL
```

![image-20210217211100543](C:\Users\zz238\AppData\Roaming\Typora\typora-user-images\image-20210217211100543.png)



<br/>

### 유니코드 데이터

> 국가별 호환이 되지 않는 문자 데이터를 사용 할 경우 CHAR, VARCHAR2, CLOB보다는 유니코드를 처리 할 수 있는 NCHAR, NVARCHAR2, CVLOB 형식을 사용하는 것이 좋다.
>
> 이 데이터 코드를 사용하면 전 세계의 어느 언어를 저장하든지 서로 충돌하는 상황이 발생하지 않는다

<br/>

- 유니코드 문자 저장 시에는 내부적으로 더 넓은 공간이 필요
  - CHAR(4)SMS 4바이트지만 NCHAR(4)는 내부적으로 8바이트를 차지

- NCHAR의 열의 최대 크기는 2,000이 아닌 그의 절반인 1,000
  - 유니코드는 2바이트의 공간을 요구하기 때문
- 유니코드의 상수를 지정하기 위해서는 원칙적으로 N'문자열'과 같은 형식을 사용
- 유니코드는 문자에만 관련되며 숫자, 날짜 등에는 무관

<br/>


